{% extends "base.html" %}
{% block content %}
<section class="hero">
    <h1>æ¬¢è¿æ¥åˆ° TCP åšå®¢</h1>
    <p>ä½¿ç”¨åº•å±‚ Socket æ„å»ºçš„è¿·ä½ åšå®¢ç³»ç»Ÿï¼Œæ”¯æŒæ–‡ç« æµè§ˆã€æœç´¢ã€åˆ†ç±»ã€è¯„è®ºä¸äº’åŠ¨ã€‚</p>
</section>
<section class="search-panel">
    <form method="get" action="/">
        <input type="text" name="q" placeholder="æœç´¢æ ‡é¢˜æˆ–æ­£æ–‡" value="{{ keyword }}">
        <select name="tag">
            <option value="">å…¨éƒ¨åˆ†ç±»</option>
            {% for cat in categories %}
            <option value="{{ cat.category }}" {% if tag == cat.category %}selected{% endif %}>{{ cat.category }} ({{ cat.count }})</option>
            {% endfor %}
        </select>
        <button type="submit">æœç´¢</button>
    </form>
</section>
<section class="post-list">
    {% if posts %}
        {% for post in posts %}
        <article>
            <h2><a href="/posts/{{ post.id }}">{{ post.title }}</a></h2>
            <p class="meta">ä½œè€…ï¼š{{ post.author_name }} Â· åˆ†ç±»ï¼š{{ post.tags or "æœªåˆ†ç±»" }} Â· å‘å¸ƒæ—¶é—´ï¼š{{ post.created_at }}</p>
            <p>{{ post.body[:200] }}{% if post.body|length > 200 %}...{% endif %}</p>
            <div class="actions">
                <a href="/posts/{{ post.id }}">é˜…è¯»å…¨æ–‡</a>
                <span class="stat">ğŸ‘ {{ post.like_count }}</span>
                <span class="stat">â­ {{ post.favorite_count }}</span>
            </div>
        </article>
        {% endfor %}
    {% else %}
        <p>æš‚æ— æ–‡ç« ï¼Œç™»å½•åå¯é€šè¿‡ API åˆ›å»ºã€‚</p>
    {% endif %}
</section>
{% endblock %}
